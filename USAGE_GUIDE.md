# راهنمای استفاده از بات تلگرام

## 🚀 شروع سریع

### 1. نصب و راه‌اندازی
```bash
# نصب وابستگی‌ها
npm install

# تنظیم متغیرهای محیطی
cp env.example .env
# توکن بات و سایر تنظیمات را در فایل .env قرار دهید

# راه‌اندازی بات
npm start
```

### 2. تنظیم مالک بات
در فایل `.env`:
```
BOT_OWNER_ID=your_telegram_user_id_here
```

## 📋 دستورات موجود

### 🔹 دستورات پایه
- `/start` - شروع کار با بات
- `/help` - نمایش راهنما
- `/info` - اطلاعات بات
- `/time` - زمان فعلی
- `/weather` - وضعیت هوا

### 🔹 دستورات مدیریت (Reply-based)
برای استفاده از این دستورات، روی پیام کاربر مورد نظر reply کنید و دستور را بنویسید:

- `اخراج` - اخراج کاربر از گروه
- `بن` - بن کردن کاربر از گروه
- `میوت` - سکوت کردن کاربر (24 ساعت)
- `آمار` - نمایش آمار کاربر
- `اطلاعات` - نمایش اطلاعات کاربر
- `اخطار` - دادن اخطار به کاربر
- `لغو_بن` - لغو بن کاربر
- `لغو_میوت` - لغو سکوت کاربر

**مثال استفاده:**
```
کاربر: "سلام"
مدیر: اخراج (reply به پیام کاربر)
```

### 🔹 دستورات گروه
- `گروه` - اطلاعات کامل گروه
- `اعضا` - لیست اعضای گروه
- `مدیران` - لیست مدیران گروه
- `تنظیمات` - تنظیمات گروه

### 🔹 دستورات مالک
- `آمار_کلی` - آمار کلی تمام گروه‌ها
- `همه_گروهها` - لیست همه گروه‌ها
- `بن_سراسری` - بن کردن کاربر از همه گروه‌ها (reply)
- `ارسال_همه` - ارسال پیام به همه گروه‌ها

**مثال استفاده:**
```
ارسال_همه سلام به همه گروه‌ها
```

## 🔐 سطوح دسترسی

### 👑 مالک (Owner)
- دسترسی کامل به همه دستورات
- مدیریت سراسری
- آمار کلی
- بن سراسری

### 👨‍💼 مدیر (Admin)
- دستورات مدیریت گروه
- آمار گروه
- مدیریت اعضا

### 👤 عضو (Member)
- دستورات پایه
- مشاهده اطلاعات گروه

## 📊 ویژگی‌های آمارگیری

### آمار کاربران
- تعداد پیام‌های ارسالی
- تعداد گروه‌ها
- آخرین فعالیت
- اخطارها و بن‌ها

### آمار گروه‌ها
- تعداد اعضا
- تعداد پیام‌ها
- پرکارترین اعضا
- آمار روزانه

### آمار کلی
- تعداد کل گروه‌ها
- تعداد کل کاربران
- پرکارترین گروه‌ها
- پرکارترین کاربران

## 🗄️ دیتابیس

### Collections
- **Groups** - اطلاعات گروه‌ها
- **Users** - اطلاعات کاربران
- **GroupMembers** - عضویت در گروه‌ها
- **Statistics** - آمار روزانه

### ویژگی‌های دیتابیس
- ذخیره خودکار اطلاعات
- ردیابی فعالیت‌ها
- آمارگیری پیشرفته
- پشتیبان‌گیری خودکار

## 🔧 تنظیمات

### متغیرهای محیطی
```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token
BOT_OWNER_ID=your_user_id

# Database
MONGODB_URI=mongodb://localhost:27017/telegram_bot

# Server
PORT=3000
NODE_ENV=development
```

### تنظیمات گروه
- خوشامدگویی
- ضد اسپم
- حذف خودکار
- مدت میوت

## 🚨 نکات مهم

### امنیت
- توکن بات را محرمانه نگه دارید
- فقط افراد مورد اعتماد را مالک کنید
- دسترسی‌ها را بررسی کنید

### عملکرد
- بات را در سرور قوی اجرا کنید
- دیتابیس را منظم پشتیبان‌گیری کنید
- لاگ‌ها را بررسی کنید

### استفاده
- دستورات را دقیق بنویسید
- از reply برای دستورات مدیریت استفاده کنید
- آمار را منظم بررسی کنید

## 🆘 عیب‌یابی

### مشکلات رایج
1. **بات پاسخ نمی‌دهد**
   - توکن را بررسی کنید
   - اتصال اینترنت را چک کنید

2. **دستورات کار نمی‌کنند**
   - دسترسی‌ها را بررسی کنید
   - دستور را دقیق بنویسید

3. **آمار نمایش داده نمی‌شود**
   - دیتابیس را بررسی کنید
   - لاگ‌ها را چک کنید

### لاگ‌ها
- لاگ‌ها در پوشه `logs/` ذخیره می‌شوند
- خطاها در `error.log`
- همه لاگ‌ها در `combined.log`

## 📞 پشتیبانی

برای پشتیبانی و گزارش باگ:
1. لاگ‌های مربوطه را بررسی کنید
2. مشکل را دقیق توضیح دهید
3. با مالک بات تماس بگیرید

---

**نکته:** این بات برای مدیریت گروه‌ها طراحی شده است. از آن مسئولانه استفاده کنید.
